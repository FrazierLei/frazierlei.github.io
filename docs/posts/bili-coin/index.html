<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Feifei">
    <meta name="description" content="https://feifeizaici.fun">
    <meta name="keywords" content="blog, murmur">

    <meta property="og:site_name" content="éœéœ">
    <meta property="og:title" content="
  æ‰¹é‡æ£€æµ‹Bç«™UPä¸»è§†é¢‘æŠ•å¸çŠ¶æ€ - éœéœ
">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://feifeizaici.fun/posts/bili-coin/">
    <meta property="og:image" content="https://feifeizaici.funimages/tn.png">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="https://feifeizaici.fun/posts/bili-coin/">
    <meta name="twitter:image" content="https://feifeizaici.funimages/tn.png">

    <base href="https://feifeizaici.fun/posts/bili-coin/">
    <title>
  æ‰¹é‡æ£€æµ‹Bç«™UPä¸»è§†é¢‘æŠ•å¸çŠ¶æ€ - éœéœ
</title>

    <link rel="canonical" href="https://feifeizaici.fun/posts/bili-coin/">
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    
    <link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
    <link rel="stylesheet" href="../../css/normalize.min.css">
    <link rel="stylesheet" href="../../css/style.min.css">

    

    

    <link rel="icon" type="image/png" href="../../images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../images/favicon-16x16.png" sizes="16x16">

    
      <link rel="alternate" href="https://feifeizaici.fun/index.xml" type="application/rss+xml" title="éœéœ">
      <link href="https://feifeizaici.fun/index.xml" rel="feed" type="application/rss+xml" title="éœéœ" />
    

    <meta name="generator" content="Hugo 0.86.0" />
  </head>

  <body class="">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="../../">éœéœ</a>
    <input type="checkbox" id="menu-control"/>
    <label class="menu-mobile  float-right " for="menu-control">
      <span class="btn-mobile  float-right ">&#9776;</span>
      <ul class="navigation-list">
        
          
            <li class="navigation-item  align-center ">
              <a class="navigation-link" href="https://feifeizaici.fun/posts">Blog</a>
            </li>
          
            <li class="navigation-item  align-center ">
              <a class="navigation-link" href="https://feifeizaici.fun/about">About</a>
            </li>
          
        
        
      </ul>
    </label>
  </section>
</nav>






      <div class="content">
        
  <section class="container post">
  <article>
    <header>
      <h1 class="title">æ‰¹é‡æ£€æµ‹Bç«™UPä¸»è§†é¢‘æŠ•å¸çŠ¶æ€</h1>
      <h2 class="date">September 20, 2021</h2>
    </header>

    <p><img src="https://qiniusave.feifeizaici.xyz/uPic/image-20210917234230023.png" alt=""></p>
<p>æˆ‘19å¹´æ—¶å€™æ‰æ³¨å†Œçš„Bç«™ï¼Œç›®çš„æ˜¯ç»™å²³æŒé—¨æŠ•å¸ï¼Œä¸¤å¹´å¤šè¿‡å»äº†ï¼ŒåŸºæœ¬æ¯ä¸ªè§†é¢‘éƒ½æŠ•è¿‡äº†ä½†æ˜¯éš¾å…æœ‰å‡ æ¡æ¼ç½‘ä¹‹é±¼ï¼Œä¸€ä¸ªä¸€ä¸ªæ‰“å¼€çœ‹æœ‰ç‚¹è´¹æ—¶é—´ï¼Œæ‰€ä»¥å†™äº†ä¸€ä¸ªç®€å•çš„è„šæœ¬æ¥è‡ªåŠ¨åŒ–å®Œæˆã€‚</p>
<p>ä¹‹å‰å†™è¿‡ä¸€ç¯‡<a href="https://feifeizaici.xyz/posts/bilibili-download/">ã€JSé€†å‘ã€‘ç ´è§£ç¬¬ä¸‰æ–¹BILIBILIè§†é¢‘ä¸‹è½½åŠ å¯†ç­–ç•¥</a>ï¼Œå½“æ—¶æ˜¯çœ‹åˆ°Jackå¤§ä½¬çš„<a href="https://mp.weixin.qq.com/s/aWratg1j9RBAjIghoY66yQ">å®è—Bç«™UPä¸»ï¼Œè§†é¢‘å¼¹å¹•å°½æ”¶å›Šä¸­</a>æ‰å¼€å§‹ç ”ç©¶Bç«™çš„</p>
<h2 id="è·å–å…¨éƒ¨è§†é¢‘çš„url">è·å–å…¨éƒ¨è§†é¢‘çš„URL</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># è·å–ã€Œå‚²è§†åœ¨ä¿—ä¸–ä¸Šã€çš„ä½œå“åˆ—è¡¨</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">space_url</span> <span class="o">=</span> <span class="s1">&#39;https://space.bilibili.com/8981370&#39;</span>
<span class="n">search_url</span> <span class="o">=</span> <span class="s1">&#39;https://api.bilibili.com/x/space/arc/search&#39;</span>
<span class="n">mid</span> <span class="o">=</span> <span class="n">space_url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">sess</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>

<span class="c1"># è·å–è§†é¢‘ä¸ªæ•°</span>
<span class="n">ps</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">pn</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="n">mid</span><span class="p">,</span>
          <span class="s1">&#39;ps&#39;</span><span class="p">:</span> <span class="n">ps</span><span class="p">,</span>
          <span class="s1">&#39;tid&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="s1">&#39;pn&#39;</span><span class="p">:</span> <span class="n">pn</span><span class="p">}</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">search_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="n">info</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">video_count</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;page&#39;</span><span class="p">][</span><span class="s1">&#39;count&#39;</span><span class="p">]</span>

<span class="n">ps</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">video_count</span><span class="o">/</span><span class="n">ps</span><span class="p">)</span>
<span class="n">videos</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">pn</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">page</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="n">mid</span><span class="p">,</span>
              <span class="s1">&#39;ps&#39;</span><span class="p">:</span> <span class="n">ps</span><span class="p">,</span>
              <span class="s1">&#39;tid&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="s1">&#39;pn&#39;</span><span class="p">:</span> <span class="n">pn</span><span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">search_url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">vlist</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;list&#39;</span><span class="p">][</span><span class="s1">&#39;vlist&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">video</span> <span class="ow">in</span> <span class="n">vlist</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">video</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
        <span class="n">bvid</span> <span class="o">=</span> <span class="n">video</span><span class="p">[</span><span class="s1">&#39;bvid&#39;</span><span class="p">]</span>
        <span class="n">videos</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">bvid</span><span class="p">:</span> <span class="n">title</span><span class="p">})</span>
</code></pre></div><p>è·å–åˆ°75ä¸ªè§†é¢‘ï¼Œä¸å®é™…ç›¸ç¬¦ã€‚</p>
<p><img src="https://qiniusave.feifeizaici.xyz/uPic/image-20210920123409042.png" alt=""></p>
<h2 id="æ£€æµ‹è§†é¢‘æŠ•å¸çŠ¶æ€">æ£€æµ‹è§†é¢‘æŠ•å¸çŠ¶æ€</h2>
<p>è‡ªå·±æ‰‹åŠ¨æŠ“åŒ…æœªå…å¤ªè¿‡ç¹çï¼Œç›´æ¥åœ¨GitHubä¸Šçš„<a href="https://github.com/SocialSisterYi/bilibili-API-collect">å“”å“©å“”å“©-APIæ”¶é›†æ•´ç†</a>ä¸­æŸ¥é˜…ï¼Œå¯ä»¥èŠ‚çº¦å¾ˆå¤šæ—¶é—´ã€‚</p>
<p><img src="https://qiniusave.feifeizaici.xyz/uPic/image-20210917235813353.png" alt=""></p>
<p>äºæ˜¯ï¼Œè¿™éƒ¨åˆ†ä»£ç å¯ä»¥è¿™ä¹ˆå†™</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">bvid</span><span class="p">,</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">videos</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.bilibili.com/x/web-interface/archive/coins&#39;</span><span class="p">,</span>
                   <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bvid&#39;</span> <span class="p">:</span> <span class="n">bvid</span><span class="p">},</span> 
                   <span class="n">cookies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SESSDATA&#39;</span> <span class="p">:</span> <span class="s1">&#39;xxxxxxxxxxxxxxxx&#39;</span><span class="p">})</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;multiply&#39;</span><span class="p">]</span> <span class="c1"># å·²æŠ•å¸çš„æ•°é‡ï¼ˆ0-2ï¼‰</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># å¦‚æœæ²¡æœ‰æŠ•ä¸¤ä¸ªå¸ï¼Œæ‰“å°å‡ºurl</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;https://www.bilibili.com/video/&#39;</span> <span class="o">+</span> <span class="n">bvid</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
</code></pre></div><p>è¿™é‡Œéœ€è¦ä¸€ä¸ªåä¸º <code>SESSDATA</code> çš„cookieï¼Œè·å–æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œç‚¹å‡»ç½‘å€æ—è¾¹çš„ğŸ”’å³å¯ã€‚</p>
<p><img src="https://qiniusave.feifeizaici.xyz/uPic/image-20210920123010526.png" alt=""></p>
<p><img src="https://qiniusave.feifeizaici.xyz/uPic/image-20210920122919982.png" alt=""></p>

  </article>

  <br/>

  
  
</section>

      </div>
      
        <footer class="footer">
  <section class="container">
    
      <div class="sns-shares sp-sns-shares">
        
        
        
        
        
      </div>
    
    
      <p>Hello, world.</p>
    
     Â© 2021    Â·  Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/naro143/hugo-coder-portfolio">CoderPortfolio</a>. 

  </section>
</footer>
<div class="fixed-bar">
  <section class="container">
    
      <p id="privateTriggerText">éœéœåœ¨å“ª<a id="privateTrigger">Click!</a></p>
    
    
      <div class="sns-shares pc-sns-shares">
        
        
        
        
        
      </div>
    
  </section>
</div>

      
    </main>

    

  <script src="../../js/app.js"></script>
  
  <script>
  (function($) {
    $(function() {
      $('#privateTrigger').on('click', function() {
        $('.private').slideToggle();
        $('#privateTriggerText').text("éœéœåœ¨æ­¤");
      });
    });
   })(jQuery);
  </script>
  
  </body>
</html>
